---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import ModalGallery from '../components/ModalGallery.astro';
import GalleryTiles from '../components/GalleryTiles.astro';
import {Image} from 'astro:assets';

import {getCollection} from 'astro:content';
const images = await getCollection('images');
const wise = images.filter((image) =>
	image.data.project.includes('Wise Island')
);
const tupah = images.filter((image) =>
	image.data.project.includes('Tupah')
);
const newcombe = images.filter((image) =>
	image.data.project.includes('Newcombe')
);
const stoik = images.filter((image) =>
	image.data.project.includes('Stoik')
);
---

<Layout title="John Duncan Ferguson - Portfolio">
	<main class="pt-1">
		<Hero slogan="Portfolio" more="some of the work I've done" cta="" url="" bg="bg-hero-portfolio md:bg-hero-portfolio-lg"/>

		<!-- ======= gallery stuff, first the tiles/buttons that launch the modals, then the modals ============ -->

		<div class="">
			<GalleryTiles />
		</div>

		<ModalGallery galleryName="wise" galleryTitle="Wise Island" previous="" next="tupah">
			{wise.map((img) => (
				<Image src={img.data.pathToImage} alt={img.data.credit} width={img.data.width} height={img.data.height}
							 class="h-auto max-w-full"/>
				<p class="bg-base-950 px-2 py-1 text-base-100">photo credit: {img.data.credit}</p>
			))
			}
		</ModalGallery>

		<ModalGallery galleryName="tupah" galleryTitle="Tupah" previous="wise" next="newcombe">
			{tupah.map((img) => (
				<Image src={img.data.pathToImage} alt={img.data.credit} width={img.data.width} height={img.data.height}
							 class="h-auto max-w-full"/>
				<p class="bg-base-950 px-2 py-1 text-base-100">photo credit: {img.data.credit}</p>
			))
			}
		</ModalGallery>

		<ModalGallery galleryName="newcombe" galleryTitle="Newcombe" previous="tupah" next="stoik">
			{newcombe.map((img) => (
				<Image src={img.data.pathToImage} alt={img.data.credit} width={img.data.width} height={img.data.height}
							 class="h-auto max-w-full"/>
				<p class="bg-base-950 px-2 py-1 text-base-100">photo credit: {img.data.credit}</p>
			))
			}
		</ModalGallery>

		<ModalGallery galleryName="stoik" galleryTitle="Stoik" previous="newcombe" next="">
			{stoik.map((img) => (
				<Image src={img.data.pathToImage} alt={img.data.credit} width={img.data.width} height={img.data.height}
							 class="h-auto max-w-full"/>
				<p class="bg-base-950 px-2 py-1 text-base-100">photo credit: {img.data.credit}</p>
			))
			}
		</ModalGallery>

		<!-- ======== end the gallery stuff =========== -->

	</main>
</Layout>
