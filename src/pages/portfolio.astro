---
import Layout from '../layouts/Layout.astro';
import Hero from "../components/Hero.astro";
import ModalGallery from "../components/ModalGallery.astro";
import GalleryTiles from "../components/GalleryTiles.astro";

import {getCollection} from 'astro:content';
const images = await getCollection('images');
const wise = images.filter((image) =>
	image.data.project.includes('Wise Island')
);
const tupah = images.filter((image) =>
	image.data.project.includes('Tupah')
);
const newcombe = images.filter((image) =>
	image.data.project.includes('Newcombe')
);
---

<Layout title="John Duncan Ferguson - Portfolio">
	<main class="pt-1">
		<Hero slogan="Portfolio" more="some of the work I've done" cta="" url="" bg="bg-hero-portfolio md:bg-hero-portfolio-lg"/>

		<!-- ======= gallery stuff, first the tiles/buttons that launch the modals, then the modals ============ -->

		<div class="py-1">
			<GalleryTiles />
		</div>

		<ModalGallery galleryName="wise" galleryTitle="Wise Island" previous="" next="tupah">
			{wise.map((img) => (
				<img src={img.data.pathToImage} alt={img.data.credit} class="h-auto max-w-full"/>
				<p class="bg-base-700 px-2 py-1 mb-1 text-base-100">photo credit: {img.data.credit}</p>
			))
			}
		</ModalGallery>

		<ModalGallery galleryName="tupah" galleryTitle="Tupah" previous="wise" next="newcombe">
			{tupah.map((img) => (
				<img src={img.data.pathToImage} alt={img.data.credit} class="h-auto max-w-full"/>
				<p class="bg-base-700 px-2 py-1 mb-1 text-base-100">photo credit: {img.data.credit}</p>
			))
			}
		</ModalGallery>

		<ModalGallery galleryName="newcombe" galleryTitle="Newcombe" previous="tupah" next="">
			{newcombe.map((img) => (
				<img src={img.data.pathToImage} alt={img.data.credit} class="h-auto max-w-full"/>
				<p class="bg-base-700 px-2 py-1 mb-1 text-base-100">photo credit: {img.data.credit}</p>
			))
			}
		</ModalGallery>

		<!-- ======== end the gallery stuff =========== -->

	</main>
</Layout>
